# Test info

- Name: Visual Tests for Main Pages >> notes page visual test
- Location: /Users/freedommarketing/Desktop/effort-flow-planner/tests/ui.spec.ts:152:5

# Error details

```
Error: expect(page).toHaveScreenshot(expected)

  36042 pixels (ratio 0.04 of all image pixels) are different.

Expected: /Users/freedommarketing/Desktop/effort-flow-planner/tests/ui.spec.ts-snapshots/notes-page-chromium-darwin.png
Received: /Users/freedommarketing/Desktop/effort-flow-planner/screenshots/ui-Visual-Tests-for-Main-Pages-notes-page-visual-test-chromium/notes-page-actual.png
    Diff: /Users/freedommarketing/Desktop/effort-flow-planner/screenshots/ui-Visual-Tests-for-Main-Pages-notes-page-visual-test-chromium/notes-page-diff.png

Call log:
  - expect.toHaveScreenshot(notes-page.png) with timeout 10000ms
    - verifying given screenshot expectation
  - taking page screenshot
    - disabled all CSS animations
  - waiting for fonts to load...
  - fonts loaded
  - 36042 pixels (ratio 0.04 of all image pixels) are different.
  - waiting 100ms before taking screenshot
  - taking page screenshot
    - disabled all CSS animations
  - waiting for fonts to load...
  - fonts loaded
  - captured a stable screenshot
  - 36042 pixels (ratio 0.04 of all image pixels) are different.

    at /Users/freedommarketing/Desktop/effort-flow-planner/tests/ui.spec.ts:171:28
```

# Page snapshot

```yaml
- region "Notifications (F8)":
  - list
- region "Notifications alt+T"
- banner:
  - heading "All Notes" [level=1]:
    - img
    - text: All Notes
  - paragraph: Browse and manage all your notes.
  - link "Back to Home":
    - /url: /
    - img
    - text: Back to Home
- checkbox "Select all notes"
- text: Select All (0 / 12 selected)
- checkbox "blah Edit note blah Delete note blah"
- heading "blah Edit note blah Delete note blah" [level=3]:
  - text: blah
  - link "Edit note blah":
    - /url: /notes/8183848c-9ba5-470a-b8e0-765a549be3e3/edit
    - img
    - text: Edit note blah
  - button "Delete note blah":
    - img
    - text: Delete note blah
- paragraph: "Created: 5/27/2025"
- paragraph: <ul><li><p>blah</p></li></ul>
- checkbox "another test note but for real Edit note another test note but for real Delete note another test note but for real"
- heading "another test note but for real Edit note another test note but for real Delete note another test note but for real" [level=3]:
  - text: another test note but for real
  - link "Edit note another test note but for real":
    - /url: /notes/ef42cfe8-b614-4208-85fd-5e41c8599434/edit
    - img
    - text: Edit note another test note but for real
  - button "Delete note another test note but for real":
    - img
    - text: Delete note another test note but for real
- paragraph: "Created: 5/27/2025"
- paragraph: <p>i love this so much</p>
- checkbox "test a note Edit note test a note Delete note test a note"
- heading "test a note Edit note test a note Delete note test a note" [level=3]:
  - text: test a note
  - link "Edit note test a note":
    - /url: /notes/2b265eb0-1a5d-4170-997c-dc2117e64ebc/edit
    - img
    - text: Edit note test a note
  - button "Delete note test a note":
    - img
    - text: Delete note test a note
- paragraph: "Created: 5/27/2025"
- paragraph: testing
- checkbox "unique note Edit note unique note Delete note unique note"
- heading "unique note Edit note unique note Delete note unique note" [level=3]:
  - text: unique note
  - link "Edit note unique note":
    - /url: /notes/d0347017-255c-431e-9fb4-726f33c981fd/edit
    - img
    - text: Edit note unique note
  - button "Delete note unique note":
    - img
    - text: Delete note unique note
- paragraph: "Created: 5/27/2025"
- paragraph: note body
- checkbox "testing of note Edit note testing of note Delete note testing of note"
- heading "testing of note Edit note testing of note Delete note testing of note" [level=3]:
  - text: testing of note
  - link "Edit note testing of note":
    - /url: /notes/bb7ee080-d7fb-4217-82db-6d1d43470cea/edit
    - img
    - text: Edit note testing of note
  - button "Delete note testing of note":
    - img
    - text: Delete note testing of note
- paragraph: "Created: 5/27/2025"
- paragraph: note body
- checkbox "another note Edit note another note Delete note another note"
- heading "another note Edit note another note Delete note another note" [level=3]:
  - text: another note
  - link "Edit note another note":
    - /url: /notes/8aa49654-97f7-4ec9-b8a3-e71f533acbab/edit
    - img
    - text: Edit note another note
  - button "Delete note another note":
    - img
    - text: Delete note another note
- paragraph: "Created: 5/27/2025"
- paragraph: "yes"
- checkbox "work out test Edit note work out test Delete note work out test"
- heading "work out test Edit note work out test Delete note work out test" [level=3]:
  - text: work out test
  - link "Edit note work out test":
    - /url: /notes/c3817b2f-c065-4e45-a044-5aefd94297ee/edit
    - img
    - text: Edit note work out test
  - button "Delete note work out test":
    - img
    - text: Delete note work out test
- paragraph: "Created: 5/26/2025"
- paragraph: testing
- checkbox "test Edit note test Delete note test"
- heading "test Edit note test Delete note test" [level=3]:
  - text: test
  - link "Edit note test":
    - /url: /notes/d45280ed-ad27-4cb9-b0b1-1b0ba7d54f01/edit
    - img
    - text: Edit note test
  - button "Delete note test":
    - img
    - text: Delete note test
- paragraph: "Created: 5/26/2025"
- paragraph: <p></p>
- checkbox "test Edit note test Delete note test"
- heading "test Edit note test Delete note test" [level=3]:
  - text: test
  - link "Edit note test":
    - /url: /notes/1bee22ad-92fb-4822-ada9-74618aedb99e/edit
    - img
    - text: Edit note test
  - button "Delete note test":
    - img
    - text: Delete note test
- paragraph: "Created: 5/26/2025"
- paragraph: testing
- checkbox "test Edit note test Delete note test"
- heading "test Edit note test Delete note test" [level=3]:
  - text: test
  - link "Edit note test":
    - /url: /notes/cfe0ab77-be31-48e6-aad4-eef76dea2afe/edit
    - img
    - text: Edit note test
  - button "Delete note test":
    - img
    - text: Delete note test
- paragraph: "Created: 5/26/2025"
- paragraph: testing
- checkbox "test Edit note test Delete note test"
- heading "test Edit note test Delete note test" [level=3]:
  - text: test
  - link "Edit note test":
    - /url: /notes/40c4018c-ec1d-459b-ac84-92d4f9040b6f/edit
    - img
    - text: Edit note test
  - button "Delete note test":
    - img
    - text: Delete note test
- paragraph: "Created: 5/26/2025"
- paragraph: testing
- checkbox "test Edit note test Delete note test"
- heading "test Edit note test Delete note test" [level=3]:
  - text: test
  - link "Edit note test":
    - /url: /notes/08c999cf-dcf2-4163-9811-7c787cd8821a/edit
    - img
    - text: Edit note test
  - button "Delete note test":
    - img
    - text: Delete note test
- paragraph: "Created: 5/26/2025"
- paragraph: another
```

# Test source

```ts
   71 |             await passwordInput.fill('password123');
   72 |         } else {
   73 |             // Use provided test credentials from env variables
   74 |             await emailInput.fill(TEST_EMAIL);
   75 |             await passwordInput.fill(TEST_PASSWORD);
   76 |         }
   77 |         
   78 |         // Click login button and wait
   79 |         await loginButton.first().click();
   80 |         await waitForPageStability(page);
   81 |     }
   82 | }
   83 |
   84 | // Test all main pages for visual regressions
   85 | test.describe('Visual Tests for Main Pages', () => {
   86 |     // Configure for desktop viewport by default
   87 |     test.use({ viewport: devices.desktop });
   88 |     // Run before each test
   89 |     test.beforeEach(async ({ page }) => {
   90 |         // Set a consistent viewport for all tests
   91 |         await page.setViewportSize({ width: 1280, height: 800 });
   92 |     });
   93 |
   94 |     test('login page visual test', async ({ page }) => {
   95 |         // Navigate to the login page
   96 |         await page.goto('/login');
   97 |
   98 |         // Use our helper function to wait for page stability
   99 |         await waitForPageStability(page);
  100 |
  101 |         // Take a screenshot and compare it to the baseline
  102 |         await expect(page).toHaveScreenshot('login-page.png');
  103 |     });
  104 |
  105 |     test('dashboard visual test', async ({ page }) => {
  106 |         // Handle authentication first
  107 |         await authenticate(page);
  108 |
  109 |         // Navigate to the dashboard
  110 |         await page.goto('/');
  111 |
  112 |         // Wait for the page to stabilize
  113 |         await waitForPageStability(page);
  114 |
  115 |         // Check if we got redirected to login page (authentication required)
  116 |         if (page.url().includes('/login')) {
  117 |             console.log(
  118 |                 'Redirected to login - authentication required for dashboard'
  119 |             );
  120 |             // Try authentication again
  121 |             await authenticate(page);
  122 |             await page.goto('/');
  123 |             await waitForPageStability(page);
  124 |         }
  125 |
  126 |         // Take a screenshot and compare it to the baseline
  127 |         await expect(page).toHaveScreenshot('dashboard-page.png');
  128 |     });
  129 |
  130 |     test('tasks page visual test', async ({ page }) => {
  131 |         // Handle authentication first
  132 |         await authenticate(page);
  133 |
  134 |         // Navigate to tasks page after authentication
  135 |         await page.goto('/tasks');
  136 |         await waitForPageStability(page);
  137 |
  138 |         // Check if we got redirected to login page (authentication required)
  139 |         if (page.url().includes('/login')) {
  140 |             console.log(
  141 |                 'Redirected to login - authentication required for tasks page'
  142 |             );
  143 |             // Try authentication again
  144 |             await authenticate(page);
  145 |             await page.goto('/tasks');
  146 |             await waitForPageStability(page);
  147 |         }
  148 |
  149 |         await expect(page).toHaveScreenshot('tasks-page.png');
  150 |     });
  151 |
  152 |     test('notes page visual test', async ({ page }) => {
  153 |         // Handle authentication first
  154 |         await authenticate(page);
  155 |
  156 |         // Navigate to notes page after authentication
  157 |         await page.goto('/notes');
  158 |         await waitForPageStability(page);
  159 |
  160 |         // Check if we got redirected to login page (authentication required)
  161 |         if (page.url().includes('/login')) {
  162 |             console.log(
  163 |                 'Redirected to login - authentication required for notes page'
  164 |             );
  165 |             // Try authentication again
  166 |             await authenticate(page);
  167 |             await page.goto('/notes');
  168 |             await waitForPageStability(page);
  169 |         }
  170 |
> 171 |         await expect(page).toHaveScreenshot('notes-page.png');
      |                            ^ Error: expect(page).toHaveScreenshot(expected)
  172 |     });
  173 |
  174 |     // Component-specific tests
  175 |     test('task creation form', async ({ page }) => {
  176 |         // Ensure we are logged-in, then navigate
  177 |         await authenticate(page);
  178 |         await page.goto('/tasks');
  179 |         await waitForPageStability(page);
  180 |
  181 |         // Try several approaches to find and click the create task button
  182 |         try {
  183 |             // Try to find button by text content first
  184 |             const buttonSelectors = [
  185 |                 page.getByRole('button', { name: /add|create|new task/i }),
  186 |                 page.getByTestId('create-task-button'),
  187 |                 page.locator('button:has-text("Task")'),
  188 |                 page.locator('button:has-text("+")'),
  189 |             ];
  190 |
  191 |             let clicked = false;
  192 |             for (const selector of buttonSelectors) {
  193 |                 if (
  194 |                     (await selector.count()) > 0 &&
  195 |                     (await selector.isVisible())
  196 |                 ) {
  197 |                     await selector.click();
  198 |                     clicked = true;
  199 |                     break;
  200 |                 }
  201 |             }
  202 |             expect(clicked).toBe(true); // fail loudly if button not found
  203 |
  204 |             // Wait briefly for dialog to appear
  205 |             await page.waitForTimeout(800);
  206 |
  207 |             // Just take a screenshot of the whole page with dialog open
  208 |             await expect(page).toHaveScreenshot('task-create-form-page.png');
  209 |         } catch (e) {
  210 |             console.log(
  211 |                 'Could not find or interact with task creation button:',
  212 |                 e
  213 |             );
  214 |             // Take screenshot anyway to see current state
  215 |             await expect(page).toHaveScreenshot('tasks-page-no-dialog.png');
  216 |         }
  217 |     });
  218 | });
  219 |
  220 | // Device-specific tests for responsive views
  221 | test.describe('Device-specific views', () => {
  222 |     // Desktop view tests
  223 |     test.describe('Desktop viewport', () => {
  224 |         test.use({ viewport: devices.desktop });
  225 |
  226 |         test('desktop sidebar view', async ({ page }) => {
  227 |             await page.goto('/');
  228 |             await waitForPageStability(page);
  229 |
  230 |             // For desktop, we expect the sidebar to be visible by default
  231 |             // Take full page screenshot that will include the sidebar
  232 |             await expect(page).toHaveScreenshot('desktop-with-sidebar.png');
  233 |         });
  234 |
  235 |         test('desktop dashboard content', async ({ page }) => {
  236 |             await page.goto('/');
  237 |             await waitForPageStability(page);
  238 |
  239 |             // Screenshot main content area - avoiding precise element selection
  240 |             // Just give the app enough time to fully render
  241 |             await expect(page).toHaveScreenshot(
  242 |                 'desktop-dashboard-content.png'
  243 |             );
  244 |         });
  245 |     });
  246 |
  247 |     // Mobile view tests
  248 |     test.describe('Mobile viewport', () => {
  249 |         test.use({ viewport: devices.mobile });
  250 |
  251 |         test('mobile layout (sidebar likely collapsed)', async ({ page }) => {
  252 |             await page.goto('/');
  253 |             await waitForPageStability(page);
  254 |
  255 |             // On mobile, sidebar may be collapsed by default - this is expected
  256 |             await expect(page).toHaveScreenshot('mobile-default-view.png');
  257 |
  258 |             // Try to find and click a hamburger menu or sidebar toggle if it exists
  259 |             const possibleToggles = [
  260 |                 page.getByRole('button', {
  261 |                     name: /menu|toggle|hamburger|sidebar/i,
  262 |                 }),
  263 |                 page.locator(
  264 |                     '.hamburger, [data-testid="menu-button"], button.menu-toggle'
  265 |                 ),
  266 |                 page.locator('button').filter({ hasText: /☰|≡|menu/i }),
  267 |             ];
  268 |
  269 |             // Try each possible toggle selector
  270 |             for (const toggle of possibleToggles) {
  271 |                 if ((await toggle.count()) > 0 && (await toggle.isVisible())) {
```